C51 COMPILER V9.60.7.0   433SEND                                                           08/18/2025 16:17:57 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE 433SEND
OBJECT MODULE PLACED IN .\Objects\433send.obj
COMPILER INVOKED BY: D:\keil5C51\C51\BIN\C51.EXE 433send.c ROM(COMPACT) OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND PRIN
                    -T(.\Listings\433send.lst) OBJECT(.\Objects\433send.obj)

line level    source

   1          #include "SN8F5702.H"
   2          #include "intrins.h"
   3          #include "delayms.h"
   4          #include "433send.h"
   5          
   6          /*
   7           * name : 433ĞÅºÅ·¢ËÍ
   8           * 433·¢ËÍ¹ı³Ì£º 1.µçÆ½Ê±¼äÉèÖÃ Witty433_Init(unsigned int set_level_buf[8]) -->
   9           *              2.·¢ËÍÄÚÈİºÍ´ÎÊıÉèÖÃ SendInput_433(unsigned char *data,unsigned int dataBitNum,unsigned ch
             -ar sendNum) -->
  10           *              3.·¢ËÍ StartSend_433()
  11           * 433×Ô¶¨ÒåÄÚÈİ£º433µÄ¸÷¸öµçÆ½Ê±¼ä£¬433µÄµØÖ·Âë£¬433µÄ¿ØÖÆÂë£¬433µÄ·¢ËÍ´ÎÊıÓÉÓÃ»§×Ô¶¨Òå¡£
  12           */
  13          
  14          #define Data_Send_H 1
  15          #define Data_Send_L 0
  16          
  17          sbit data_send = P1 ^ 0;
  18          
  19          static Witty433 witty433;
  20          
  21          
  22          uint16_t set_433time_buf[] = {120, 120, 12,   4,    4,    12,   4,    13}; // ÉèÖÃ433·¢ËÍµçÆ½Ê±¼ä
  23                                      /*12ms 12ms 1.2ms 0.4ms 0.4ms 1.2ms 0.4ms 1.3ms
  24          
  25          //uint16_t set_433time_buf[] = {120, 120, 120, 120,120,120,120,120}; // ÉèÖÃ433·¢ËÍµçÆ½Ê±¼ä
  26          
  27          
  28          /**********************************µçÆ½Ê±¼ä²ÎÊıÉèÖÃ³õÊ¼»¯£¨×Ô¶¨Òå²¿·Ö£©***********************************
             -*/
  29          // #define delay_us_433 delay_us(1)                                                  // ÉèÖÃ433Î¢ÃëÑÓÊ±º¯Ê
             -ı£¨×Ô¶¨Òå²¿·Ö£©
  30          // #define delay_ms_433 delay_ms(1)                                                  // ÉèÖÃ433ºÁÃëÑÓÊ±º¯Ê
             -ı£¨×Ô¶¨Òå²¿·Ö£©
  31          // #define delay_long_us delay_us(10)                                                // ÉèÖÃ433³¤ÑÓÊ±º¯Êı£
             -¨×Ô¶¨Òå²¿·Ö£©
  32          
  33          
  34          void delay_long_us(unsigned int long_us)
  35          {
  36   1      
  37   1              delay_us(long_us);
  38   1      }
  39          void delay_long_ms(unsigned int long_ms)
  40          {
  41   1              delay_ms(long_ms);
  42   1      }
  43          
  44          void Witty433_Init(unsigned int set_level_buf[8]) // Õâ¸öset_level_buf[8]Êı×é±£´æµÄÊÇ¸÷¸öµçÆ½Ê±¼ä£¬µ¥Î»ÊÇu
             -s
  45          {
  46   1              SetStartLevelTime_433(set_level_buf[0], set_level_buf[1]); // ÉèÖÃÆğÊ¼Âë ¸ß µÍ µçÆ½Ê±¼ä
  47   1              SetOneLevelTime_433(set_level_buf[2], set_level_buf[3]);   // ÉèÖÃbit1   ¸ß µÍ µçÆ½Ê±¼ä
  48   1              SetZeroLevelTime_433(set_level_buf[4], set_level_buf[5]);  // ÉèÖÃbit0   ¸ß µÍ µçÆ½Ê±¼ä
C51 COMPILER V9.60.7.0   433SEND                                                           08/18/2025 16:17:57 PAGE 2   

  49   1              SetEndLevelTime_433(set_level_buf[6], set_level_buf[7]);   // ÉèÖÃ½áÊøÂë ¸ß µÍ µçÆ½Ê±¼ä
  50   1      
  51   1              witty433.delay_433 = delay_long_us;
  52   1      }
  53          
  54          /************************************* 433µçÆ½Ê±¼ä²ÎÊıÉèÖÃº¯Êı ****************************************/
  55          
  56          /* ÉèÖÃÆğÊ¼ÂëµçÆ½Ê±¼ä */
  57          void SetStartLevelTime_433(unsigned int time_H, unsigned int time_L)
  58          {
  59   1              witty433.StartLevelTime_H = time_H;
  60   1              witty433.StartLevelTime_L = time_L;
  61   1      }
  62          
  63          /* ÉèÖÃ½áÊøÂëµçÆ½Ê±¼ä */
  64          void SetEndLevelTime_433(unsigned int time_H, unsigned int time_L)
  65          {
  66   1              witty433.EndLevelTime_H = time_H;
  67   1              witty433.EndLevelTime_L = time_L;
  68   1      }
  69          
  70          /* ÉèÖÃbit0µçÆ½Ê±¼ä */
  71          void SetZeroLevelTime_433(unsigned int time_H, unsigned int time_L)
  72          {
  73   1              witty433.ZeroLevelTime_H = time_H;
  74   1              witty433.ZeroLevelTime_L = time_L;
  75   1      }
  76          
  77          /* ÉèÖÃbit1µçÆ½Ê±¼ä */
  78          void SetOneLevelTime_433(unsigned int time_H, unsigned int time_L)
  79          {
  80   1              witty433.OneLevelTime_H = time_H;
  81   1              witty433.OneLevelTime_L = time_L;
  82   1      }
  83          
  84          /******************************* 433·¢ËÍ²ÎÊıÉèÖÃº¯Êı ****************************************/
  85          
  86          /* ÉèÖÃµØÖ·Âë */
  87          //void SetAddr_433(unsigned char *addr, unsigned int addrBitNum)
  88          //{
  89          //        witty433.Addr = addr;
  90          //        witty433.AddrBitNum = addrBitNum;
  91          //}
  92          
  93          ///* ÉèÖÃÊı¾İÓò */
  94          //void SetSendData_433(unsigned char *sendData, unsigned int sendDataBitNum)
  95          //{
  96          //        witty433.SendData = sendData;
  97          //        witty433.SendDataBitNum = sendDataBitNum;
  98          //}
  99          
 100          ///* ÉèÖÃÁ¬Ğø·¢ËÍ´ÎÊı */
 101          //void SetSendNumber_433(unsigned char sendNumber)
 102          //{
 103          //        witty433.SendNumber = sendNumber;
 104          //}
 105          
 106          /******************************* ·¢ËÍ³õÊ¼»¯º¯Êı ****************************************/
 107          
 108          /* ´«Èë·¢ËÍ²ÎÊıÄÚÈİ--Êı¾İÓò¼°·¢ËÍ´ÎÊı */
 109          //void SendInput_433(unsigned char *data, unsigned int dataBitNum, unsigned char sendNum)
 110          //{
C51 COMPILER V9.60.7.0   433SEND                                                           08/18/2025 16:17:57 PAGE 3   

 111          //        SetSendNumber_433(sendNum);        // ÉèÖÃsendNumÁ¬Ğø·¢ËÍ´ÎÊı,²»Í¬³§ÉÌµÄ¿ÉÄÜ²»Ò»Ñù£¬ĞèÒª×¢Òâ
 112          //        SetSendData_433(data, dataBitNum); // dataÊı×éÊÇ¾ßÌåµÄ¿ØÖÆÊı¾İ,dataBitNumÊÇÊı¾İµÄÎ»Êı
 113          //}
 114          
 115          
 116          
 117          /************************************************************************************/
 118          
 119          /* ·¢ËÍÆğÊ¼Âë */
 120          void SendStart_433()
 121          {
 122   1              data_send = Data_Send_H;
 123   1              witty433.delay_433(witty433.StartLevelTime_H);
 124   1      
 125   1              data_send = Data_Send_L;
 126   1              witty433.delay_433(witty433.StartLevelTime_L);
 127   1      }
 128          
 129          /* ·¢ËÍµØÖ·Âë */
 130          void SendAddr(uint16_t in_addr1)
 131          {
 132   1              uint8_t addr_h = (in_addr1 >> 8) & 0xFF; // »ñÈ¡µØÖ·Âë¸ßÎ»
 133   1              uint8_t addr_l = in_addr1 & 0xFF;        // »ñÈ¡µØÖ·ÂëµÍÎ»
 134   1      
 135   1              SendBit_433(addr_h, 8); // ÏÈĞ´¸ßÎ»
 136   1              SendBit_433(addr_l, 8); // ÏÈĞ´µØÎ»
 137   1      }
 138          
 139          /* ·¢ËÍÊı¾İÓò */
 140          void SendData(uint8_t in_dat1)
 141          {
 142   1              SendBit_433(in_dat1, 8);
 143   1      }
 144          
 145          /* ·¢ËÍ½áÊøÂë */
 146          void SendEnd_433()
 147          {
 148   1              data_send = Data_Send_H;
 149   1              witty433.delay_433(witty433.EndLevelTime_H);
 150   1      
 151   1              data_send = Data_Send_L;
 152   1              witty433.delay_433(witty433.EndLevelTime_L);
 153   1      }
 154          
 155          /* ·¢ËÍbit0 */
 156          void SendBit0_433()
 157          {
 158   1              data_send = Data_Send_H;
 159   1              witty433.delay_433(witty433.ZeroLevelTime_H);
 160   1      
 161   1              data_send = Data_Send_L;
 162   1              witty433.delay_433(witty433.ZeroLevelTime_L);
 163   1      }
 164          
 165          /* ·¢ËÍbit1 */
 166          void SendBit1_433()
 167          {
 168   1              data_send = Data_Send_H;
 169   1              witty433.delay_433(witty433.OneLevelTime_H);
 170   1      
 171   1              data_send = Data_Send_L;
 172   1              witty433.delay_433(witty433.OneLevelTime_L);
C51 COMPILER V9.60.7.0   433SEND                                                           08/18/2025 16:17:57 PAGE 4   

 173   1      }
 174          
 175          /* ·¢ËÍ16½øÖÆÊı¾İ--1Byte */
 176          //void SendHex_433(unsigned char byte)
 177          //{
 178          //        SendBit_433(byte, 8);
 179          //}
 180          
 181          /* ·¢ËÍbitÊı¾İ--´ı·¢ËÍÊı¾İ¼°´ı·¢ËÍÊı¾İbitÊı0~8 */
 182          
 183          void SendBit_433(unsigned char byte, unsigned char bitNum)
 184          {
 185   1             uint8_t a = 0;
 186   1              for (a = 0; a < bitNum; a++)
 187   1              {
 188   2                      if (byte & 0x80)
 189   2                      {
 190   3                              SendBit1_433();
 191   3                      }
 192   2                      else
 193   2                      {
 194   3                              SendBit0_433();
 195   3                      }
 196   2                      byte <<= 1;
 197   2                                      _nop_();
 198   2              }
 199   1      }
 200          
 201          
 202          /*******************************·¢ËÍÒ»´Î433ĞÅºÅ***************************************/
 203          
 204          void StartSend_433(uint16_t in_addr2, uint8_t in_dat) // ÏÈ´«Èë·¢ËÍ²ÎÊı£¬ÔÙ·¢ËÍ
 205          {
 206   1              SendStart_433();
 207   1              SendAddr(in_addr2);
 208   1              SendData(in_dat);
 209   1              SendEnd_433();
 210   1      }
 211          
 212          /*******************************·¢ËÍ¶à´Î433ĞÅºÅ***************************************/
 213          
 214          void StartSend_433_long(uint16_t in_addr3, uint8_t in_dat,uint8_t in_num) // ·¢ËÍ¶à´Î433ĞÅºÅ
 215          {
 216   1              uint8_t b = 0;
 217   1              for (b = 0; b < in_num; b++)
 218   1              {
 219   2                              SendStart_433();
 220   2                              SendAddr(in_addr3);// ·¢ËÍµØÖ·Âë
 221   2                              SendData(in_dat);// ·¢ËÍÊı¾İÓò
 222   2              }
 223   1              SendEnd_433();
 224   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    545    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     85    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.60.7.0   433SEND                                                           08/18/2025 16:17:57 PAGE 5   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
