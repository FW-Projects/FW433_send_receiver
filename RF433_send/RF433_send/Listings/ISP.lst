C51 COMPILER V9.60.7.0   ISP                                                               08/18/2025 16:17:57 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE ISP
OBJECT MODULE PLACED IN .\Objects\ISP.obj
COMPILER INVOKED BY: D:\keil5C51\C51\BIN\C51.EXE ISP.c ROM(COMPACT) OPTIMIZE(0,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\ISP.lst) OBJECT(.\Objects\ISP.obj)

line level    source

   1          #include "ISP.h"
   2          #include <intrins.h>                                                                     // for _nop_
   3          #include <absacc.h>                                                                                                                                                              // for CBYTE
   4          #define  L_ISP_ADDR     0xfc0
   5          
   6          idata uint16_t r_read_rom_addr = L_ISP_ADDR ;
   7          idata uint8_t u8_data[3] = {0}  ;                                                         //需写Flash的数据
   8          
   9          //====================================================================================================//
  10          //写ISP
  11          //====================================================================================================//
  12          void ISPpagewrite(uint8_t *r_ram_address)
  13          {
  14   1              WDTR = 0x5a;    
  15   1              PERAM = (uint8_t)r_ram_address;                                         //数据缓存器(IRAM)的第一个地址
  16   1              PEROMH = L_ISP_ADDR >> 8;                                                                       //页编程(IROM)的第一个地址(15bit-8bit)
  17   1              PEROML = (L_ISP_ADDR & 0x00f0);                                         //页编程(IROM)的第一个地址(7bit-5bit)
  18   1              EAL=0;//???              全局中断       //清狗
  19   1              PEROML |= 0x0a;                                                                                                         //开始ISP操作
  20   1              PECMD = 0x5a;                                                                                                                   //开始ISP操作           
  21   1              EAL=1;//???              全局中断       
  22   1      }       
  23          
  24          void ISPpageread2(void)
  25          {
  26   1              volatile uint8_t i= 0;
  27   1              for(i=0;i<3;i++)
  28   1              {
  29   2                      u8_data[i] =CBYTE[r_read_rom_addr++];
  30   2              }
  31   1      }
  32          
  33          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     82    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =      5    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
