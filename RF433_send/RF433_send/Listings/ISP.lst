C51 COMPILER V9.60.7.0   ISP                                                               09/06/2025 13:36:19 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE ISP
OBJECT MODULE PLACED IN .\Objects\ISP.obj
COMPILER INVOKED BY: D:\keil5C51\C51\BIN\C51.EXE ISP.c ROM(COMPACT) OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\
                    -Listings\ISP.lst) OBJECT(.\Objects\ISP.obj)

line level    source

   1          #include "ISP.h"
   2          #include <intrins.h>                                                                     // for _nop_
   3          #include <absacc.h>                                                                                                                                                              // for CBYTE
   4          #include <SN8F5702.H>
   5          #define  L_ISP_ADDR     0xfc0
   6          
   7          idata uint16_t r_read_rom_addr = L_ISP_ADDR ;
   8          idata uint8_t u8_data[3] = {0}  ;                                                         //需写Flash的数据
   9          
  10          //====================================================================================================//
  11          //写ISP
  12          //====================================================================================================//
  13          void ISPpagewrite(uint8_t *r_ram_address)
  14          {
  15   1              WDTR = 0x5a;    
  16   1              PERAM = (uint8_t)r_ram_address;                                         //数据缓存器(IRAM)的第一个地址
  17   1              PEROMH = L_ISP_ADDR >> 8;                                                                       //页编程(IROM)的第一个地址(15bit-8bit)
  18   1              PEROML = (L_ISP_ADDR & 0x00f0);                                         //页编程(IROM)的第一个地址(7bit-5bit)
  19   1              EAL=0;//???              全局中断       //清狗
  20   1              PEROML |= 0x0a;                                                                                                         //开始ISP操作
  21   1              PECMD = 0x5a;                                                                                                                   //开始ISP操作           
  22   1              EAL=1;//???              全局中断       
  23   1      }       
  24          
  25          void ISPpageread2(void)
  26          {
  27   1              volatile uint8_t i= 0;
  28   1              for(i=0;i<3;i++)
  29   1              {
  30   2                      u8_data[i] =CBYTE[r_read_rom_addr++];
  31   2              }
  32   1      }
  33          
  34          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     64    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =      5    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
